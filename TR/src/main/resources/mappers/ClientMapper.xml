<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itwillbs.mappers.ClientMapper">

	<insert id="insertClient">
		insert into
		clients(clientType,clientCode,clientCompany,clientNumber,clientDetail,clientCeo,clientName,clientAddr1,clientAddr2,clientTel,clientPhone,clientFax,clientEmail,clientMemo)
		values (#{clientType}, #{clientCode} , #{clientCompany} ,
		#{clientNumber}, #{clientDetail}, #{clientCeo},
		#{clientName} ,
		#{clientAddr1} ,#{clientAddr2}, #{clientTel}, #{clientPhone},
		#{clientFax}, #{clientEmail},#{clientMemo})
	</insert>

	<select id="getclientList"
		resultType="com.itwillbs.domain.ClientDTO">
		select * from clients

	</select>

	<select id="getclientCode" resultType="java.lang.String">
	  SELECT IFNULL(CONCAT('OR', LPAD(CAST(SUBSTR(clientCode, 3) AS UNSIGNED) + 1, 3, '0')), 'OR001') AS newClientCode
FROM clients
WHERE clientType = #{clientType}
ORDER BY clientCode DESC
LIMIT 1;
	</select>

	<select id="clientdetail"
		resultType="com.itwillbs.domain.ClientDTO">
		select * from clients where clientCompany=#{clientCompany}
	</select>

	<select id="rawmaterialsdetail"
		resultType="com.itwillbs.domain.RawmaterialsDTO">
		SELECT * FROM rawMaterial WHERE clientCode = #{clientCode};
	</select>

	<select id="selldetail" resultType="com.itwillbs.domain.ProdDTO">
		SELECT * FROM product WHERE
		clientCode = #{clientCode};
	</select>

	<update id="clientupdate">
		UPDATE clients
		SET clientCompany=#{clientCompany}
		,clientNumber=#{clientNumber},
		clientDetail=#{clientDetail},clientCeo=#{clientCeo},clientName=#{clientName},
		clientAddr1=#{clientAddr1}, clientAddr2=#{clientAddr2},
		clientTel=#{clientTel},clientPhone=#{clientPhone},clientFax=#{clientFax},
		clientEmail=#{clientEmail},clientMemo=#{clientMemo}

		where
		clientCompany=#{clientCompany}

	</update>

	<delete id="clientdelete">
		DELETE FROM clients WHERE
		clientCompany=#{clientCompany}

	</delete>


</mapper>