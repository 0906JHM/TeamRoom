<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="com.itwillbs.mappers.PerformanceMapper">
 
 
  <insert id="perfinsert">
 INSERT INTO performance(perfCode,workCode,prodCode,lineCode,perfDate,perfEmpId,perfAmount,
                                     perfFair, perfDefect,perfDefectreason,perfDefectmemo,perfMemo,perfStatus)
                                                                                             
 VALUES(#{perfCode},#{workCode},#{prodCode},#{lineCode},#{perfDate},#{perfEmpId},#{perfAmount},
                                     #{perfFair}, COALESCE(#{perfDefect}, 0),#{perfDefectreason},#{perfDefectmemo},#{perfMemo},#{perfStatus})
 </insert>
 
 
 
 <select id="getperflist" resultType="PerformanceDTO">
 select * from performance
 
 </select>
 
 <select id="getlinelist" resultType="com.itwillbs.domain.LineDTO">
 
 select * from line
 
 </select>
 
 <select id="getprodlist" resultType="com.itwillbs.domain.ProdDTO">
 
SELECT * FROM product
 </select>
 
 <select id="getworklist" resultType="WorkOrderDTO">
 SELECT * FROM workOrder
 </select>
 
 <select id="getdetail" resultType="PerformanceDTO">
 select * from performance where perfCode=#{perfCode}
 
 </select>
 
 <update id="perfupdate">
 update performance set 
 perfFair=#{perfFair}, perfDefect=#{perfDefect}, perfDefectreason=#{perfDefectreason},perfDefectmemo=#{perfDefectmemo},
 perfMemo=#{perfMemo},perfStatus=#{perfStatus}
 where perfCode=#{perfCode}
 </update>
 
 <delete id="perfdelete">
 delete from performance where perfCode=#{perfCode}
 
 </delete>
 
 <select id="getpielist" resultType="PerformanceDTO">
 <!-- MainMapper.xml -->
    SELECT * FROM performance
    WHERE 
    <choose>
        <when test="lineCode == 101">
            line_code = 101
        </when>
        <when test="lineCode == 102">
            line_code = 102
        </when>
        <when test="lineCode == 103">
            line_code = 103
        </when>
        <!-- 기타 다른 조건에 대한 처리 -->
        <otherwise>
            1=1 <!-- 항상 참인 조건을 넣어서 아무런 영향을 미치지 않게 함 -->
        </otherwise>
    </choose>
</select>
 
 
 
 
 
 </mapper>